{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/api/api.js","webpack:///./src/store/modules/user.store.js","webpack:///./src/store/modules/operational.store.js","webpack:///./src/store/modules/allUsers.store.js","webpack:///./src/store/modules/components/editChat.store.js","webpack:///./src/store/modules/components/sidebar.store.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?705e","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/pages/Login.vue?d254","webpack:///src/pages/Login.vue","webpack:///./src/pages/Login.vue?51a5","webpack:///./src/pages/Login.vue","webpack:///./src/pages/Chat.vue?bb0b","webpack:///./src/components/ModileSideBar/MobileSidebar.vue?1f2e","webpack:///./src/components/ModileSideBar/modals/CreateChatModal.vue?8ed7","webpack:///src/components/ModileSideBar/modals/CreateChatModal.vue","webpack:///./src/components/ModileSideBar/modals/CreateChatModal.vue?7a11","webpack:///./src/components/ModileSideBar/modals/CreateChatModal.vue?d77a","webpack:///./src/components/ModileSideBar/modals/EditChatModal.vue?b991","webpack:///src/components/ModileSideBar/modals/EditChatModal.vue","webpack:///./src/components/ModileSideBar/modals/EditChatModal.vue?c0e5","webpack:///./src/components/ModileSideBar/modals/EditChatModal.vue","webpack:///./src/components/ModileSideBar/items/ChatItem.vue?8eef","webpack:///src/components/ModileSideBar/items/ChatItem.vue","webpack:///./src/components/ModileSideBar/items/ChatItem.vue?b301","webpack:///./src/components/ModileSideBar/items/ChatItem.vue","webpack:///src/components/ModileSideBar/MobileSidebar.vue","webpack:///./src/components/ModileSideBar/MobileSidebar.vue?1047","webpack:///./src/components/ModileSideBar/MobileSidebar.vue?38e2","webpack:///src/pages/Chat.vue","webpack:///./src/pages/Chat.vue?5524","webpack:///./src/pages/Chat.vue","webpack:///./src/router/router.js","webpack:///./src/main.js","webpack:///./src/components/ModileSideBar/modals/CreateChatModal.vue?8409","webpack:///./src/pages/Chat.vue?d9cc","webpack:///./src/components/ModileSideBar/MobileSidebar.vue?940d","webpack:///./src/components/ModileSideBar/items/ChatItem.vue?da20"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","path","uri","getRequestUri","axios","response","resultStatus","status","console","log","post","messageType","chatType","messageRead","user","state","username","email","contacts","chats","chat_id","usernames","admin","messages","lastReadMessageId","mutations","SET_USER","payload","forEach","item","SET_CHAT_MESSAGES","find","PUSH_MESSAGE","message","container","undefined","UPDATE_MESSAGE","messageToUpdate","id","text","PUSH_CHAT","chat","ADD_USER_TO_CHAT","SET_CHAT_LAST_READ_MESSAGE_ID","actions","LOAD_USER_DATA","context","api","then","commit","RECEIVE_MESSAGE","socketMessage","type","rootGetters","GET_CURRENT_CHAT_ID","sender","dispatch","getters","GET_USER","GET_CURRENT_CHAT","GET_MESSAGES","GET_CHAT_NAME","newContactName","md5","require","insertMessage","updateMessage","messageSent","generateMessageId","Date","now","Math","random","operational","currentChatId","SET_CURRENT_CHAT_ID","SET_NEW_CONTACT_NAME","SEND_SOCKET_MESSAGE","Vue","$socket","send","JSON","stringify","CHANGE_NEW_CONTACT_NAME","CREATE_CHAT","res","CHANGE_CURRENT_CHAT","updatedMessage","assign","lastMessage","SEND_MESSAGE","messageObj","date","meta","attached_file_path","GET_NEW_CONTACT_NAME","newChat","UPDATE_MESSAGE_STATE","UPDATE_LAST_READ_MESSAGE","SAVE_CHAT_NAME","allUsers","SET_ALL_USERS","LOAD_ALL_USERS","GET_ALL_USERS","editChatModal","isShown","openedChat","SET_SHOWN_STATE","SET_CHAT_TO_EDIT","SET_EDIT_CHAT_OPENED_STATE","CHAT_TO_EDIT","IS_EDIT_CHAT_SHOWN","sidebar","SET_SIDEBAR_SHOWN_STATE","SET_SIDEBAR_OPENED_STATE","IS_SIDEBAR_SHOWN","use","Vuex","Store","strict","process","socket","isConnected","reconnectError","SOCKET_ONOPEN","event","currentTarget","SOCKET_ONCLOSE","SOCKET_ONERROR","error","SOCKET_RECONNECT","count","info","SOCKET_RECONNECT_ERROR","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","components","component","model","callback","$$v","showAlert","expression","_v","_s","alertText","staticClass","$set","passwordOk","passwordVerif","isMobile","on","$event","isCreate","signUp","signIn","directives","rawName","modifiers","changeAction","setNewChat","chatName","chosenChatMessages","_l","concat","reverse","class","convertToDatetime","_e","messageText","sendMessage","isOpened","userData","scopedSlots","_u","fn","ref","hide","signOut","chatItem","emitChat","isCreateModalOpened","findUserText","contactItem","emitContact","isEditModalOpened","isModalOpened","alertVariant","findUserName","filter","includes","chosenUsers","toggleUser","createChat","editedChatName","saveChatName","indexOf","addUserToChat","setChat","openChatSettingsModal","getNumberOfUnread","VueRouter","routes","redirect","title","Login","Chat","router","base","VueNativeSock","location","host","connectManually","reconnection","reconnectionAttempts","store","protocol","BootstrapVue","IconsPlugin","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.95a2507a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import axios from 'axios'\n\nconst get = async function (path) {\n    const uri = getRequestUri(path);\n    let resultStatus;\n\n    let response = await axios.get(uri);\n    resultStatus = response.data.status;\n\n    if (resultStatus !== true) {\n        console.log(response);\n    }\n\n    return response.data;\n};\n\nconst post = async function (path, data = null) {\n    const uri = getRequestUri(path);\n\n    let response = await axios.post(uri, data);\n\n    if (response.data.status !== true) {\n        console.log(\"failed response: \", response);\n    }\n\n    return response.data;\n};\n\nfunction getRequestUri(path) {\n    return '/api/v1/' + path;\n}\n\nexport default {\n    get,\n    post,\n};\n","import api from \"../../api/api\";\n\nconst messageType = 1\nconst chatType = 2\n\n// client to server messages types\nconst insertMessage = 1\nconst updateMessage = 2\nconst deleteMessage = 3\n\n// message state codes\nconst messageSent = 1\nconst messageDelivered = 2\nconst messageRead = 3\n\nconst user = {\n    state: () => ({\n        username: '',\n        email: '',\n        contacts: [],\n        chats: [{\n            chat_id: '',\n            name: '',\n            usernames: '',\n            admin: '',\n            messages: [],\n            lastReadMessageId: '',\n        }],\n    }),\n    mutations: {\n        SET_USER: (state, payload) => {\n            state.username = payload.username;\n            state.email = payload.email;\n            state.contacts = payload.contacts;\n\n            // initialize all chats with empty messages to let vuex watch them\n            payload.chats.forEach(item => {\n                item.messages = [];\n            })\n            state.chats = payload.chats;\n            console.log(\"User set: \", state);\n        },\n        SET_CHAT_MESSAGES: (state, payload) => {\n            state.chats.find(item => item.chat_id === payload.chat_id).messages = payload.messages;\n        },\n        PUSH_MESSAGE (state, message)  {\n            let container;\n            container = state.chats.find(item => item.chat_id === message.chat_id)\n            if (container.messages === undefined || container.messages === null)\n                container.messages = []\n            container.messages.push(message);\n        },\n        UPDATE_MESSAGE (state, message) {\n            let messageToUpdate = state.chats.find(item => item.chat_id === message.chat_id).messages.find(item => item.id === message.id);\n            if (messageToUpdate === undefined) {\n                console.log(\"Message to update is undefined, wtf??\")\n            }\n            messageToUpdate.state = message.state;\n            messageToUpdate.text = message.text;\n            console.log(\"Updated message \", messageToUpdate);\n        },\n        PUSH_CHAT (state, chat) {\n            chat.messages = [];\n            state.chats.push(chat);\n        },\n        ADD_USER_TO_CHAT(state, {chat, user}) {\n            // да, мы просто добавляем юзера в локальном сторе, обновления об этом с сервера думаю нет смылса делать\n            state.chats.find(item => item.chat_id === chat.chat_id).usernames.push(user.username);\n        },\n        SET_CHAT_LAST_READ_MESSAGE_ID (state, message) {\n            state.chats.find(item => item.chat_id === message.chat_id).lastReadMessageId = message.id;\n        }\n    },\n    actions: {\n        LOAD_USER_DATA: (context) => {\n            const response = api.get(\"user\");\n            response.then(data => {\n                let user = data.data;\n                context.commit(\"SET_USER\", user);\n                user.chats.forEach(item => {\n                    const response = api.get('messages/' + item.chat_id);\n                    response.then(data => {\n                        let messages = [];\n                        if (data === undefined || data === null || data.status === false) {\n                            console.log(\"Some error in load messages\");\n                            return;\n                        }\n                        data.data.forEach(item => {\n                                messages.push(item)\n                            }\n                        );\n                        context.commit(\"SET_CHAT_MESSAGES\", {chat_id: item.chat_id, messages: messages})\n                    });\n                })\n            });\n        },\n        RECEIVE_MESSAGE: (context, socketMessage) => {\n            let container;\n\n            switch (socketMessage.type) {\n                case messageType: // TODO: message.error handling\n                    // check if this message already exists\n                    container = context.state.chats.find(chat => chat.chat_id === socketMessage.data.chat_id).messages.find(message => message.id === socketMessage.data.id);\n                    if (container !== undefined) {\n                        context.commit(\"UPDATE_MESSAGE\", socketMessage.data);\n                        return;\n                    }\n                    context.commit(\"PUSH_MESSAGE\", socketMessage.data);\n                    if (socketMessage.data.chat_id === context.rootGetters.GET_CURRENT_CHAT_ID && socketMessage.data.sender !== context.state.username && socketMessage.data.status !== messageRead) {\n                        socketMessage.data.state = messageRead;\n                        context.dispatch(\"UPDATE_MESSAGE_STATE\", socketMessage.data);\n                        context.dispatch(\"UPDATE_LAST_READ_MESSAGE\", socketMessage.data);\n                    }\n                    break;\n                case chatType:\n                    context.commit(\"PUSH_CHAT\", socketMessage.data);\n                    break;\n                default:\n                    console.log(\"Unknown message type: \", socketMessage)\n            }\n        },\n    },\n    getters: {\n        GET_USER: state => {\n            return state;\n        },\n        GET_CURRENT_CHAT: (state, getters) => {\n            return state.chats.find(item => item.chat_id === getters.GET_CURRENT_CHAT_ID);\n        },\n        GET_MESSAGES: (state, getters) => {\n            console.log(\"Message requested\");\n            let chat = state.chats.find(item => item.chat_id === getters.GET_CURRENT_CHAT_ID);\n            if (chat !== undefined) {\n                console.log(\"Returning messages from store: \", chat.messages);\n                return chat.messages;\n            }\n            else\n                return null;\n        },\n        GET_CHAT_NAME: (state, getters) => {\n            console.log(\"ID: \", getters.GET_CURRENT_CHAT_ID)\n            let chat = state.chats.find(item => item.chat_id === getters.GET_CURRENT_CHAT_ID);\n            if (chat !== undefined)\n                return chat.name;\n            else\n                return state.newContactName;\n        },\n    }\n}\n\nexport default user;","import api from \"../../api/api\";\nimport Vue from \"vue\";\n\nconst md5 = require('md5');\n\nconst messageType = 1\nconst chatType = 2\n\n// client to server messages types\nconst insertMessage = 1\nconst updateMessage = 2\nconst deleteMessage = 3\n\n// message state codes\nconst messageSent = 1\nconst messageDelivered = 2\nconst messageRead = 3\n\nconst generateMessageId = function () {\n    return md5(Date.now() + Math.random())\n}\n\nconst operational = {\n    state: () => ({\n        newContactName: '',\n        currentChatId: 0,\n    }),\n    mutations: {\n        SET_CURRENT_CHAT_ID(state, id) {\n            state.currentChatId = id;\n            console.log(\"Current chat set: \", id);\n        },\n        SET_NEW_CONTACT_NAME(state, name) {\n            state.newContactName = name;\n        },\n    },\n    actions: {\n        SEND_SOCKET_MESSAGE: (context, payload) => {\n            Vue.prototype.$socket.send(JSON.stringify(payload));\n        },\n        CHANGE_NEW_CONTACT_NAME: (context, payload) => {\n            context.commit(\"SET_NEW_CONTACT_NAME\", payload);\n            console.log(\"Contact name set: \", context.state.newContactName);\n        },\n        CREATE_CHAT: async function(context, chat) {\n            const res = await api.post(\"chat\", chat);\n            if (res.status === false) {\n                console.log(\"server error creating chat\")\n                return null;\n            }\n            return res.data;\n        },\n        CHANGE_CURRENT_CHAT: (context, payload) => {\n            context.commit(\"SET_CURRENT_CHAT_ID\", payload);\n            if (payload === null) {\n                return;\n            }\n            // marking all opened messages as read\n            let messages = context.getters.GET_MESSAGES;\n            if (messages === null || messages.length === 0)\n                return;\n            messages.forEach(message => {\n                if (message.sender !== context.state.username && message.state !== messageRead) {\n                    let updatedMessage = Object.assign({}, message);\n                    updatedMessage.state = messageRead;\n                    updatedMessage.chat_id = context.getters.GET_CURRENT_CHAT_ID;\n                    context.dispatch(\"UPDATE_MESSAGE_STATE\", updatedMessage);\n                }\n            });\n            // обновляем последнее прочитанное сообщение\n            let lastMessage = messages[messages.length - 1];\n            if (lastMessage.sender !== context.state.username && lastMessage.id !== context.getters.GET_CURRENT_CHAT.lastReadMessageId) {\n                lastMessage.chat_id = context.getters.GET_CURRENT_CHAT_ID;\n                context.dispatch(\"UPDATE_LAST_READ_MESSAGE\", lastMessage);\n                context.commit(\"SET_CHAT_LAST_READ_MESSAGE_ID\", lastMessage)\n            }\n        },\n        SEND_MESSAGE: function(context, message) {\n            let messageObj = {\n                type: insertMessage,\n                message: {\n                    id: generateMessageId(),\n                    sender: context.getters.GET_USER.username,\n                    chat_id: context.getters.GET_CURRENT_CHAT_ID,\n                    date: Date.now(),\n                    state: messageSent,\n                    text: message,\n                    meta: null,\n                    attached_file_path: \"\",\n                }\n            }\n            if (context.getters.GET_CURRENT_CHAT_ID === null) {\n                let chat = {\n                    name: context.getters.GET_USER.username + \" with \" + context.getters.GET_NEW_CONTACT_NAME,\n                    admin: context.getters.GET_USER.username,\n                    usernames: [context.getters.GET_USER.username, context.getters.GET_NEW_CONTACT_NAME]\n                }\n                console.log(\"Creating chat: \", chat);\n                context.dispatch(\"CREATE_CHAT\", chat).then(newChat => {\n                    if (newChat === null)\n                        return;\n                    console.log(\"Created chat: \", newChat);\n                    messageObj.message.chat_id = newChat.chat_id;\n                    context.commit(\"SET_CURRENT_CHAT_ID\", newChat.chat_id)\n                    context.dispatch(\"SEND_SOCKET_MESSAGE\", messageObj)\n                    console.log(\"init message sent: \", messageObj);\n                    context.commit(\"PUSH_MESSAGE\", messageObj.message)\n                    context.dispatch(\"UPDATE_LAST_READ_MESSAGE\", messageObj.message)\n                });\n            } else {\n                context.dispatch(\"SEND_SOCKET_MESSAGE\", messageObj)\n                console.log(\"reg message sent: \", messageObj);\n                context.commit(\"PUSH_MESSAGE\", messageObj.message)\n                context.dispatch(\"UPDATE_LAST_READ_MESSAGE\", messageObj.message)\n            }\n        },\n        UPDATE_MESSAGE_STATE: (context, payload) => {\n            let message = {\n                type: updateMessage,\n                message: payload\n            }\n            context.dispatch(\"SEND_SOCKET_MESSAGE\", message)\n        },\n        UPDATE_LAST_READ_MESSAGE: (context, message) => {\n            api.post('last', message).then(data => {\n                    if (data.status === false) {\n                        console.log(\"server error updating last read message\")\n                    }\n                }\n            )\n            context.commit(\"SET_CHAT_LAST_READ_MESSAGE_ID\", message)\n        },\n        ADD_USER_TO_CHAT: (context, payload) => {\n            api.post(\"add\", payload).then(data => {\n                    if (data.status === false) {\n                        console.log(\"server error creating chat\")\n                    }\n                }\n            )\n            context.commit(\"ADD_USER_TO_CHAT\", payload);\n        },\n        SAVE_CHAT_NAME:  (context, payload) => {\n            api.post(\"name\", payload).then(data => {\n                    if (data.status === false) {\n                        console.log(\"server error editing chat\")\n                    }\n                }\n            )\n        },\n    },\n    getters: {\n        GET_CURRENT_CHAT_ID: state => {\n            return state.currentChatId;\n        },\n        GET_NEW_CONTACT_NAME: state => {\n            return state.newContactName;\n        }\n    }\n}\n\nexport default operational;","import api from \"../../api/api\";\n\nconst allUsers = {\n    state: () => ({\n        allUsers: [],\n    }),\n    mutations: {\n        SET_ALL_USERS: (state, payload) => {\n            payload.forEach(item => {\n                state.allUsers.push(item);\n            })\n        },\n    },\n    actions: {\n        LOAD_ALL_USERS: (context) => {\n            const response = api.get(\"all_users\");\n            response.then(data => {\n                context.commit(\"SET_ALL_USERS\", data.data);\n            });\n        },\n    },\n    getters: {\n        GET_ALL_USERS: state => {\n            return state.allUsers;\n        },\n    }\n}\n\nexport default allUsers;","const editChatModal = {\n    state: () => ({\n        isShown: false,\n        openedChat: null,\n    }),\n    mutations: {\n        SET_SHOWN_STATE: (state, payload) => {\n            state.isShown = payload;\n        },\n        SET_CHAT_TO_EDIT: (state, payload) => {\n            state.openedChat = payload;\n        }\n    },\n    actions: {\n        SET_EDIT_CHAT_OPENED_STATE: (context, payload) => {\n            context.commit(\"SET_SHOWN_STATE\", payload)\n        },\n        SET_CHAT_TO_EDIT: (context, payload) => {\n            context.commit(\"SET_CHAT_TO_EDIT\", payload)\n        }\n    },\n    getters: {\n        CHAT_TO_EDIT: state => {\n            return state.openedChat;\n        },\n        IS_EDIT_CHAT_SHOWN: state => {\n            return state.isShown;\n        }\n    }\n}\n\nexport default editChatModal;","const sidebar = {\n    state: () => ({\n        isShown: false,\n    }),\n    mutations: {\n        SET_SIDEBAR_SHOWN_STATE: (state, payload) => {\n            state.isShown = payload;\n        },\n    },\n    actions: {\n        SET_SIDEBAR_OPENED_STATE: (context, payload) => {\n            context.commit(\"SET_SIDEBAR_SHOWN_STATE\", payload)\n        },\n    },\n    getters: {\n        IS_SIDEBAR_SHOWN: state => {\n            return state.isShown;\n        }\n    }\n}\n\nexport default sidebar;","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport user from \"./modules/user.store\";\nimport operational from \"./modules/operational.store\";\nimport allUsers from \"./modules/allUsers.store\";\nimport editChatModal from \"./modules/components/editChat.store\";\nimport sidebar from \"./modules/components/sidebar.store\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n    strict: process.env.NODE_ENV !== 'production',\n    modules: {\n        user: user,\n        operational: operational,\n        allUsers: allUsers,\n        editChatModal: editChatModal,\n        sidebar: sidebar,\n    },\n    state: {\n        socket: {\n            isConnected: false,\n            message: '',\n            reconnectError: false,\n        },\n    },\n    getters: {\n\n    },\n    mutations: {\n        SOCKET_ONOPEN (state, event)  {\n            Vue.prototype.$socket = event.currentTarget\n            state.socket.isConnected = true\n            console.log(\"Connected in store!\")\n        },\n        SOCKET_ONCLOSE (state, event)  {\n            state.socket.isConnected = false\n        },\n        SOCKET_ONERROR (state, event)  {\n            console.error(\"socket error in store: \", state, event)\n        },\n        // mutations for reconnect methods\n        SOCKET_RECONNECT(state, count) {\n            console.info(state, count)\n        },\n        SOCKET_RECONNECT_ERROR(state) {\n            state.socket.reconnectError = true;\n        },\n    },\n    actions: {\n\n    },\n});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App',\n  components: {\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=29089c18&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showAlert),callback:function ($$v) {_vm.showAlert=$$v},expression:\"showAlert\"}},[_vm._v(\" \"+_vm._s(_vm.alertText)+\" \")]),_c('b-row',{staticClass:\"m-4 mt-5\"},[_c('b-col',[_c('h1',[_vm._v(\"Welcome back\")])])],1),_c('b-row',{staticClass:\"m-4\"},[_c('b-col',[_c('label',[_vm._v(\" Имя \"),_c('b-form-input',{attrs:{\"size\":\"lg\",\"placeholder\":\"Enter your nick\"},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}})],1)])],1),_c('b-row',{staticClass:\"m-4\"},[_c('b-col',[_c('label',[_vm._v(\" Пароль \"),_c('b-form-input',{attrs:{\"size\":\"lg\",\"state\":_vm.passwordOk,\"type\":\"password\",\"placeholder\":\"Enter your password\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}})],1)])],1),_c('b-collapse',{staticClass:\"mt-2\",attrs:{\"id\":\"collapse-1\"}},[_c('b-row',{staticClass:\"m-4\"},[_c('b-col',[_c('label',[_vm._v(\" Пароль еще раз \"),_c('b-form-input',{attrs:{\"size\":\"lg\",\"state\":_vm.passwordOk,\"type\":\"password\",\"placeholder\":\"Enter password again\"},model:{value:(_vm.passwordVerif),callback:function ($$v) {_vm.passwordVerif=$$v},expression:\"passwordVerif\"}})],1)])],1)],1),_c('b-row',{staticClass:\"m-4 mt-5\"},[_c('b-col',[_c('b-button',{attrs:{\"variant\":\"success\",\"size\":\"lg\",\"block\":_vm.isMobile},on:{\"click\":function($event){_vm.isCreate ? _vm.signUp() : _vm.signIn()}}},[_vm._v(\" \"+_vm._s(_vm.isCreate ? \"Создать аккаут\" : \"Войти\")+\" \")])],1)],1),_c('b-row',[_c('b-col',[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.collapse-1\",modifiers:{\"collapse-1\":true}}],attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":_vm.changeAction}},[_vm._v(\" \"+_vm._s(_vm.isCreate ? \"У меня есть аккаут\" : \"У меня нет аккаутна\")+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-container fluid>\n        <b-alert v-model=\"showAlert\" variant=\"danger\" dismissible>\n            {{ alertText }}\n        </b-alert>\n        <b-row class=\"m-4 mt-5\">\n            <b-col>\n                <h1>Welcome back</h1>\n            </b-col>\n        </b-row>\n        <b-row class=\"m-4\">\n            <b-col>\n                <label>\n                    Имя\n                    <b-form-input size=\"lg\" v-model=\"user.username\" placeholder=\"Enter your nick\"></b-form-input>\n                </label>\n            </b-col>\n        </b-row>\n        <b-row class=\"m-4\">\n            <b-col>\n                <label>\n                    Пароль\n                    <b-form-input size=\"lg\" v-model=\"user.password\" :state=\"passwordOk\" type=\"password\" placeholder=\"Enter your password\"></b-form-input>\n                </label>\n            </b-col>\n        </b-row >\n        <b-collapse id=\"collapse-1\" class=\"mt-2\">\n        <b-row class=\"m-4\">\n            <b-col>\n                <label>\n                    Пароль еще раз\n                    <b-form-input size=\"lg\" v-model=\"passwordVerif\" :state=\"passwordOk\" type=\"password\" placeholder=\"Enter password again\"></b-form-input>\n                </label>\n            </b-col>\n        </b-row>\n        </b-collapse>\n        <b-row class=\"m-4 mt-5\">\n            <b-col>\n                <b-button variant=\"success\" @click=\"isCreate ? signUp() : signIn()\" size=\"lg\" :block=\"isMobile\">\n                    {{ isCreate ? \"Создать аккаут\" : \"Войти\" }}\n                </b-button>\n            </b-col>\n        </b-row>\n        <b-row>\n            <b-col>\n                <b-button v-b-toggle.collapse-1 variant=\"outline-secondary\" @click=\"changeAction\">\n                    {{ isCreate ? \"У меня есть аккаут\" : \"У меня нет аккаутна\" }}\n                </b-button>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\n    import api from \"../api/api\";\n\n    export default {\n        name: \"Login\",\n        data() {\n            return {\n                user: {\n                    username: '',\n                    password: '',\n                },\n                passwordVerif: '',\n                isCreate: false,\n                showAlert: false,\n                alertText: false,\n                isMobile: true,\n            }\n        },\n        created() {\n            this.isMobile = window.screen.width > 500;\n        },\n        methods: {\n            signIn() {\n                const that = this;\n                const success =api.post(\"signin\", this.user);\n                success.then(data => {\n                    if (data.status === true) {\n                        that.$router.push(\"/chat\");\n                    } else {\n                        this.showAlert = true;\n                        this.alertText = \"Имя и пароль не совпадают.\"\n                    }\n                });\n            },\n            signUp() {\n                const that = this;\n                const success =api.post(\"signup\", this.user);\n                success.then(data => {\n                    if (data.status === true) {\n                        that.$router.push(\"/chat\");\n                    } else {\n                        this.showAlert = true;\n                        this.alertText = \"Не удалось создать аккаунт. Попробуйте позже.\"\n                    }\n                });\n            },\n            changeAction() {\n                this.isCreate = !this.isCreate;\n            }\n        },\n        computed: {\n            passwordOk() {\n                if (!this.isCreate || (this.user.password.length === 0)) {\n                    return null;\n                } else if (this.user.password === this.passwordVerif) {\n                    return true;\n                }\n                return false;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=247186ab&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"247186ab\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('MobileSidebar',{on:{\"contact\":function($event){return _vm.setNewChat($event.data)}}}),_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.sidebar-1\",modifiers:{\"sidebar-1\":true}}],staticClass:\"position-fixed fixed-top\",attrs:{\"squared\":\"\",\"variant\":\"primary\"}},[_vm._v(\"Меню\")]),_c('b-row',[_c('b-col',[_c('h4',[_vm._v(\"Чат \"+_vm._s(_vm.chatName))])])],1),_c('b-row',[_c('b-col',[(_vm.chosenChatMessages !== null)?_c('div',{staticClass:\"messages-container overflow-auto\",attrs:{\"id\":\"messages-cont\"}},_vm._l((_vm.chosenChatMessages.concat([]).reverse()),function(message){return _c('div',{key:message.date,class:(message.sender === _vm.user.username ? 'right-message' : 'left-message') + ' message-container'},[_c('div',{staticClass:\"message-header\"},[_c('div',{staticClass:\"message-sender\"},[_vm._v(\" \"+_vm._s(message.sender)+\" \")]),_c('div',{staticClass:\"message-date\"},[_vm._v(\" \"+_vm._s(_vm.convertToDatetime(message.date))+\" \")])]),_c('div',{class:message.state === 1 ? 'message-sent' : (message.state === 2 ? 'message-delivered' : 'message-read') + ' message-text'},[_vm._v(_vm._s(message.text))])])}),0):_vm._e()])],1),_c('b-row',{attrs:{\"align-content\":\"center\"}},[_c('b-col',{attrs:{\"align-self\":\"center\"}},[_c('div',{staticClass:\"input-container w-75 m-auto\"},[_c('b-input-group',[_c('b-input',{staticClass:\"message-input\",attrs:{\"placeholder\":\"Введите сообщение...\",\"type\":\"text\"},model:{value:(_vm.messageText),callback:function ($$v) {_vm.messageText=$$v},expression:\"messageText\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":_vm.sendMessage}},[_c('b-icon-envelope')],1)],1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-sidebar',{attrs:{\"width\":\"380px\",\"id\":\"sidebar-1\",\"visible\":_vm.isOpened,\"title\":_vm.userData.username + ' menu',\"shadow\":\"\",\"backdrop\":\"\"},scopedSlots:_vm._u([{key:\"footer\",fn:function(ref){\nvar hide = ref.hide;\nreturn [_c('div',{staticClass:\"d-flex bg-dark text-light justify-content-around align-items-center px-3 py-2\"},[_c('b-button',{attrs:{\"variant\":\"outline-warning\"},on:{\"click\":_vm.signOut}},[_vm._v(\"Выйти\")]),_c('b-button',{attrs:{\"size\":\"md\"},on:{\"click\":hide}},[_vm._v(\"Закрыть\")])],1)]}}])},[_c('b-container',{staticClass:\"p-0\"},[_c('b-row',{staticClass:\"mb-3 mt-4\"},[_c('b-col',[(_vm.userData.chats.length > 0)?_c('b-list-group',{staticClass:\"w-100\"},_vm._l((_vm.userData.chats),function(chatItem){return _c('ChatItem',{key:chatItem.chat_id,attrs:{\"chat\":chatItem},on:{\"click\":function($event){return _vm.emitChat(chatItem)}}})}),1):_c('p',[_vm._v(\"Чатов пока нет...\")])],1)],1),_c('b-row',[_c('b-col',{staticClass:\"m-3\"},[_c('b-button',{staticClass:\"mb-1\",attrs:{\"variant\":\"primary\",\"block\":\"\"},on:{\"click\":function($event){_vm.isCreateModalOpened = true}}},[_vm._v(\"Create chat\")]),_c('CreateChatModal',{attrs:{\"username\":_vm.userData.username,\"show-modal\":_vm.isCreateModalOpened},on:{\"close\":function($event){_vm.isCreateModalOpened = false}}}),_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.all-users-cont\",modifiers:{\"all-users-cont\":true}}],staticClass:\"mb-1\",attrs:{\"variant\":\"info\",\"block\":\"\"}},[_vm._v(\"Chat with new user\")]),_c('b-collapse',{attrs:{\"id\":\"all-users-cont\"}},[_c('b-input',{attrs:{\"placeholder\":\"Поиск пользователей...\"},model:{value:(_vm.findUserText),callback:function ($$v) {_vm.findUserText=$$v},expression:\"findUserText\"}}),(_vm.allUsers.length > 0)?_c('b-list-group',_vm._l((_vm.allUsers),function(contactItem){return _c('b-list-group-item',{key:contactItem.username,staticClass:\"flex-row align-items-start\",on:{\"click\":function($event){return _vm.emitContact(contactItem)}}},[_c('div',{staticClass:\"d-flex flex-row align-content-center justify-content-around\"},[_c('div',{staticClass:\"align-self-lg-start\"},[_c('b-avatar')],1),_c('div',[_c('h4',[_vm._v(_vm._s(contactItem.username))])])])])}),1):_vm._e()],1)],1)],1)],1),_c('EditChatModal',{attrs:{\"all-users\":_vm.allUsers,\"is-modal-opened\":_vm.isEditModalOpened,\"opened-chat\":_vm.openedChat},on:{\"close\":function($event){_vm.isEditModalOpened = false},\"contact\":function($event){return _vm.emitContact($event.data)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"id\":\"create-chat-modal\"},model:{value:(_vm.isModalOpened),callback:function ($$v) {_vm.isModalOpened=$$v},expression:\"isModalOpened\"}},[_c('b-alert',{attrs:{\"variant\":_vm.alertVariant,\"dismissible\":\"\"},model:{value:(_vm.showAlert),callback:function ($$v) {_vm.showAlert=$$v},expression:\"showAlert\"}},[_vm._v(\" \"+_vm._s(_vm.alertText)+\" \")]),(_vm.allUsers.length > 2)?_c('div',{staticClass:\"d-flex flex-column justify-content-between align-items-center\"},[_c('h4',{staticClass:\"m-2\"},[_vm._v(\"Create chat\")]),_c('b-input',{staticClass:\"m-2\",attrs:{\"placeholder\":\"Enter chat name...\"},model:{value:(_vm.chatName),callback:function ($$v) {_vm.chatName=$$v},expression:\"chatName\"}}),_c('div',{staticClass:\"users-container mb-2 mt-2 w-100\"},[_c('b-input',{staticClass:\"mb-2 w-100\",attrs:{\"placeholder\":\"Search user...\"},model:{value:(_vm.findUserName),callback:function ($$v) {_vm.findUserName=$$v},expression:\"findUserName\"}}),_c('b-list-group',_vm._l((_vm.allUsers.filter(function (item) { return (item.username.includes(_vm.findUserName) || _vm.chosenUsers.includes(item)); })),function(user){return _c('b-list-group-item',{key:user.username,attrs:{\"active\":_vm.chosenUsers.includes(user)},on:{\"click\":function($event){return _vm.toggleUser(user)}}},[_vm._v(\" \"+_vm._s(user.username)+\" \")])}),1)],1),_c('b-button',{staticClass:\"m-2\",attrs:{\"variant\":\"success\"},on:{\"click\":_vm.createChat}},[_vm._v(\"Create\")])],1):_c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(\"There is not enough users to create group chat\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-modal id=\"create-chat-modal\" v-model=\"isModalOpened\">\n        <b-alert v-model=\"showAlert\" :variant=\"alertVariant\" dismissible>\n            {{ alertText }}\n        </b-alert>\n        <div v-if=\"allUsers.length > 2\" class=\"d-flex flex-column justify-content-between align-items-center\">\n            <h4 class=\"m-2\">Create chat</h4>\n            <b-input class=\"m-2\" placeholder=\"Enter chat name...\" v-model=\"chatName\"></b-input>\n            <div class=\"users-container mb-2 mt-2 w-100\" >\n                <b-input class=\"mb-2 w-100\" placeholder=\"Search user...\" v-model=\"findUserName\"></b-input>\n                <b-list-group>\n                    <b-list-group-item :active=\"chosenUsers.includes(user)\" @click=\"toggleUser(user)\"\n                                       v-for=\"user in allUsers.filter(item => (item.username.includes(findUserName) || chosenUsers.includes(item)))\"\n                                       :key=\"user.username\">\n                        {{ user.username }}\n                    </b-list-group-item>\n                </b-list-group>\n            </div>\n            <b-button variant=\"success\" @click=\"createChat\" class=\"m-2\">Create</b-button>\n        </div>\n        <b-alert show v-else>There is not enough users to create group chat</b-alert>\n    </b-modal>\n</template>\n\n<script>\n    export default {\n        name: \"CreateChatModal\",\n        props: {\n            username: String,\n            showModal: Boolean,\n        },\n        data() {\n            return {\n                chatName: '',\n                findUserName: '',\n                chosenUsers: [],\n\n                showAlert: false,\n                alertVariant: 'success',\n                alertText: '',\n            }\n        },\n        methods: {\n            createChat() {\n                if (this.chosenUsers.length < 2) {\n                    this.showAlert = true;\n                    this.alertVariant = 'danger';\n                    this.alertText = 'Chat must contain more than one person';\n                    return;\n                }\n                let users = this.chosenUsers.map(item => item.username).concat([this.username]);\n                const chat = {\n                    name: 'group (' + users.join(', ') + ')',\n                    admin: this.username,\n                    usernames: users,\n                }\n                this.$store.dispatch('CREATE_CHAT', chat).then(data => {\n                    if (data === null) {\n                        console.log('error creating chat');\n                        this.showAlert = true;\n                        this.alertVariant = 'warning';\n                        this.alertText = 'Error creating chat';\n                    } else {\n                        console.log('created chat: ', data);\n                        this.showAlert = true;\n                        this.alertVariant = 'success';\n                        this.alertText = 'Chat created!';\n                    }\n                });\n                this.isModalOpened = false;\n            },\n            toggleUser(user) {\n                let index = this.chosenUsers.indexOf(user)\n                if (index >= 0) {\n                    this.chosenUsers.splice(index, 1);\n                } else {\n                    this.chosenUsers.push(user);\n                }\n            }\n        },\n        computed: {\n            isModalOpened: {\n                get() {\n                    return this.showModal;\n                },\n                set() {\n                    this.$emit(\"close\");\n                }\n            },\n            allUsers() {\n                return this.$store.getters.GET_ALL_USERS;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n.users-container {\n    max-height: 80%;\n    overflow-x: hidden;\n    overflow-x: auto;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateChatModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateChatModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateChatModal.vue?vue&type=template&id=1651a5b7&scoped=true&\"\nimport script from \"./CreateChatModal.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateChatModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateChatModal.vue?vue&type=style&index=0&id=1651a5b7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1651a5b7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.openedChat !== null)?_c('b-modal',{attrs:{\"id\":\"chat-settings-modal\",\"title\":_vm.openedChat.name,\"size\":\"lg\",\"scrollable\":\"\",\"centered\":\"\",\"button-size\":\"sm\"},model:{value:(_vm.isOpened),callback:function ($$v) {_vm.isOpened=$$v},expression:\"isOpened\"}},[_c('div',{staticClass:\"d-flex flex-column justify-content-around align-items-center\"},[_c('div',{staticClass:\"m-2 d-flex flex-column justify-content-between align-items-center\"},[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.chat-name-edit\",modifiers:{\"chat-name-edit\":true}}],staticClass:\"mb-1\",attrs:{\"size\":\"sm\",\"variant\":\"secondary\"}},[_vm._v(\"Edit name\")]),_c('b-collapse',{attrs:{\"id\":\"chat-name-edit\"}},[_c('b-input-group',[_c('b-input',{attrs:{\"placeholder\":\"Enter new name...\"},model:{value:(_vm.editedChatName),callback:function ($$v) {_vm.editedChatName=$$v},expression:\"editedChatName\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.saveChatName}},[_vm._v(\"Save\")])],1)],1)],1)],1),_c('b-list-group',{staticClass:\"w-100\"},_vm._l((_vm.openedChat.usernames),function(user){return _c('b-list-group-item',{key:user,staticClass:\"d-flex justify-content-between align-items-center\"},[_c('h5',[_vm._v(_vm._s(user))]),(user === _vm.openedChat.admin)?_c('b-badge',{attrs:{\"variant\":\"warning\",\"pill\":\"\"}},[_vm._v(\"Admin\")]):_vm._e()],1)}),1),(_vm.allUsers.length > 0)?_c('div',[_c('b-button',{directives:[{name:\"b-toggle\",rawName:\"v-b-toggle.all-users-collapse\",modifiers:{\"all-users-collapse\":true}}],staticClass:\"m-3\",attrs:{\"size\":\"sm\",\"variant\":\"primary\"}},[_c('b-icon-plus'),_vm._v(\" Add users\")],1),_c('b-collapse',{attrs:{\"id\":\"all-users-collapse\"}},[_c('b-input',{attrs:{\"placeholder\":\"Поиск пользователей...\"},model:{value:(_vm.findUserText),callback:function ($$v) {_vm.findUserText=$$v},expression:\"findUserText\"}}),(_vm.allUsers.length > 0 && _vm.openedChat !== null)?_c('b-list-group',_vm._l((_vm.allUsers.filter(function (item) { return !_vm.openedChat.usernames.includes(item.username) && item.username.indexOf(_vm.findUserText) >= 0; })),function(contactItem){return _c('b-list-group-item',{key:contactItem.username,staticClass:\"d-flex justify-content-between align-items-center\",on:{\"click\":function($event){return _vm.emitContact(contactItem)}}},[_c('div',[_vm._v(\" \"+_vm._s(contactItem.username)+\" \")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.addUserToChat(contactItem)}}},[_c('b-icon-plus'),_vm._v(\" Add\")],1)],1)}),1):_vm._e()],1)],1):_vm._e()],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-modal v-if=\"openedChat !== null\" id=\"chat-settings-modal\" :title=\"openedChat.name\"\n             v-model=\"isOpened\"\n             size=\"lg\"\n             scrollable\n             centered\n             button-size=\"sm\">\n        <div class=\"d-flex flex-column justify-content-around align-items-center\">\n            <div class=\"m-2 d-flex flex-column justify-content-between align-items-center\">\n                <b-button size=\"sm\" class=\"mb-1\" v-b-toggle.chat-name-edit variant=\"secondary\">Edit name</b-button>\n                <b-collapse id=\"chat-name-edit\">\n                    <b-input-group>\n                        <b-input placeholder=\"Enter new name...\" v-model=\"editedChatName\"></b-input>\n                        <b-input-group-append>\n                            <b-button @click=\"saveChatName\" variant=\"primary\">Save</b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </b-collapse>\n            </div>\n            <b-list-group class=\"w-100\">\n                <b-list-group-item v-for=\"user in openedChat.usernames\" :key=\"user\"\n                                   class=\"d-flex justify-content-between align-items-center\">\n                    <h5>{{ user }}</h5>\n                    <b-badge v-if=\"user === openedChat.admin\" variant=\"warning\" pill>Admin</b-badge>\n                </b-list-group-item>\n            </b-list-group>\n            <div v-if=\"allUsers.length > 0\">\n                <b-button size=\"sm\" class=\"m-3\" v-b-toggle.all-users-collapse variant=\"primary\"><b-icon-plus></b-icon-plus> Add users</b-button>\n                <b-collapse id=\"all-users-collapse\">\n                    <b-input v-model=\"findUserText\" placeholder=\"Поиск пользователей...\"></b-input>\n                    <b-list-group v-if=\"allUsers.length > 0 && openedChat !== null\">\n                        <b-list-group-item class=\"d-flex justify-content-between align-items-center\" @click=\"emitContact(contactItem)\" v-for=\"contactItem in allUsers.filter(item => !openedChat.usernames.includes(item.username) && item.username.indexOf(findUserText) >= 0)\" :key=\"contactItem.username\">\n                            <div>\n                                {{ contactItem.username }}\n                            </div>\n                            <b-button @click=\"addUserToChat(contactItem)\" variant=\"info\"><b-icon-plus></b-icon-plus> Add</b-button>\n                        </b-list-group-item>\n                    </b-list-group>\n                </b-collapse>\n            </div>\n        </div>\n    </b-modal>\n</template>\n\n<script>\n    export default {\n        name: \"EditChatModal\",\n        data() {\n            return {\n                editedChatName: '',\n                findUserText: '',\n            }\n        },\n        methods: {\n            saveChatName() {\n                let chatWithNewName = this.openedChat;\n                chatWithNewName.name = this.editedChatName;\n                this.$store.dispatch(\"SAVE_CHAT_NAME\", chatWithNewName);\n            },\n            addUserToChat(user) {\n                if (this.openedChat === null)\n                    return;\n                const packet = {\n                    chat: this.openedChat,\n                    user: user\n                }\n                this.$store.dispatch(\"ADD_USER_TO_CHAT\", packet);\n            },\n            emitContact(contact) {\n                this.$emit('contact', {data: contact});\n            },\n        },\n        computed: {\n            isOpened: {\n                get() {\n                    return this.$store.getters.IS_EDIT_CHAT_SHOWN;\n                },\n                set(value) {\n                    this.$store.dispatch(\"SET_EDIT_CHAT_OPENED_STATE\", value);\n                }\n            },\n            allUsers() {\n                return this.$store.getters.GET_ALL_USERS;\n            },\n            openedChat() {\n                return this.$store.getters.CHAT_TO_EDIT;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditChatModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditChatModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditChatModal.vue?vue&type=template&id=311dc7f6&scoped=true&\"\nimport script from \"./EditChatModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EditChatModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"311dc7f6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-list-group-item',{staticClass:\"d-flex justify-content-between align-items-center position-relative\"},[_c('div',{staticClass:\"d-flex justify-content-around flex-row align-content-center align-items-center\",on:{\"click\":_vm.setChat}},[(_vm.chat.usernames.length <= 2)?_c('b-icon-person',{attrs:{\"font-scale\":\"2\"}}):_c('b-icon-people',{attrs:{\"font-scale\":\"2\"}}),_c('div',{staticClass:\"chat-name-and-message\"},[_c('div',{staticClass:\"chat-name\"},[_vm._v(\" \"+_vm._s(_vm.chat.name)+\" \")]),(_vm.chat.messages.length > 0)?_c('div',{staticClass:\"chat-last-message\"},[_vm._v(\" \"+_vm._s(_vm.chat.messages[_vm.chat.messages.length - 1].sender)+\": \"+_vm._s(_vm.chat.messages[_vm.chat.messages.length - 1].text)+\" \")]):_vm._e()])],1),_c('b-icon-plus',{staticClass:\"chat-options-icon\",attrs:{\"font-scale\":\"1.5\"},on:{\"click\":function($event){return _vm.openChatSettingsModal(_vm.chat)}}}),(_vm.getNumberOfUnread > 0)?_c('b-badge',{attrs:{\"variant\":\"primary\",\"pill\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.getNumberOfUnread)+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <b-list-group-item class=\"d-flex justify-content-between align-items-center position-relative\">\n        <div @click=\"setChat\" class=\"d-flex justify-content-around flex-row align-content-center align-items-center\">\n            <b-icon-person font-scale=\"2\" v-if=\"chat.usernames.length <= 2\"></b-icon-person>\n            <b-icon-people font-scale=\"2\" v-else></b-icon-people>\n            <div class=\"chat-name-and-message\">\n                <div class=\"chat-name\">\n                    {{ chat.name }}\n                </div>\n                <div class=\"chat-last-message\" v-if=\"chat.messages.length > 0\">\n                    {{chat.messages[chat.messages.length - 1].sender}}: {{ chat.messages[chat.messages.length - 1].text }}\n                </div>\n            </div>\n        </div>\n        <b-icon-plus @click=\"openChatSettingsModal(chat)\" font-scale=\"1.5\" class=\"chat-options-icon\"></b-icon-plus>\n        <b-badge variant=\"primary\" pill v-if=\"getNumberOfUnread > 0\">\n            {{ getNumberOfUnread }}\n        </b-badge>\n    </b-list-group-item>\n</template>\n\n<script>\n    export default {\n        name: \"ChatItem\",\n        props: {\n            chat: Object,\n        },\n        data() {\n            return {\n                openedChat: {}\n            }\n        },\n        created() {\n            console.log(\"CHAT ITEM: \", this.chat);\n        },\n        methods: {\n            openChatSettingsModal(chat) {\n                this.$store.dispatch(\"SET_CHAT_TO_EDIT\", chat);\n                this.$store.dispatch(\"SET_EDIT_CHAT_OPENED_STATE\", true);\n                console.log(\"opened chat: \", chat)\n            },\n            setChat() {\n                this.$store.dispatch(\"CHANGE_CURRENT_CHAT\", this.chat.chat_id);\n                this.$store.dispatch(\"SET_SIDEBAR_OPENED_STATE\", false);\n            },\n        },\n        computed: {\n            getNumberOfUnread() {\n                let lastReadIndex = this.chat.messages.findIndex(item => item.id === this.chat.lastReadMessageId);\n                if (lastReadIndex < 0) {\n                    return this.chat.messages.length;\n                } else {\n                    return this.chat.messages.length - lastReadIndex - 1;\n                }\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .chat-name-and-message {\n        display: flex;\n        flex-direction: column;\n        text-align: left;\n        justify-items: start;\n        align-items: start;\n        padding: 0 0 0 1em;\n    }\n    .chat-name {\n        padding: 0 0 2px 0;\n        color: black;\n        font-size: larger;\n    }\n    .chat-last-message {\n        color: gray;\n        font-size: medium;\n    }\n    .chat-options-icon {\n        position: absolute;\n        top: 6px;\n        right: 6px;\n    }\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatItem.vue?vue&type=template&id=786a9129&scoped=true&\"\nimport script from \"./ChatItem.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatItem.vue?vue&type=style&index=0&id=786a9129&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"786a9129\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <b-sidebar width=\"380px\" id=\"sidebar-1\" :visible=\"isOpened\" :title=\"userData.username + ' menu'\"\n               shadow\n               backdrop>\n        <b-container class=\"p-0\">\n            <b-row class=\"mb-3 mt-4\">\n                <b-col>\n                <b-list-group class=\"w-100\" v-if=\"userData.chats.length > 0\">\n                    <ChatItem :chat=\"chatItem\" @click=\"emitChat(chatItem)\" v-for=\"chatItem in userData.chats\" :key=\"chatItem.chat_id\"></ChatItem>\n                </b-list-group>\n                <p v-else>Чатов пока нет...</p>\n                </b-col>\n            </b-row>\n            <b-row>\n                <b-col class=\"m-3\">\n                    <b-button class=\"mb-1\" @click=\"isCreateModalOpened = true\" variant=\"primary\" block>Create chat</b-button>\n                    <CreateChatModal\n                            @close=\"isCreateModalOpened = false\"\n                            :username=\"userData.username\"\n                            :show-modal=\"isCreateModalOpened\">\n                    </CreateChatModal>\n                    <b-button class=\"mb-1\" v-b-toggle.all-users-cont variant=\"info\" block>Chat with new user</b-button>\n                    <b-collapse id=\"all-users-cont\">\n                        <b-input v-model=\"findUserText\" placeholder=\"Поиск пользователей...\"></b-input>\n                        <b-list-group v-if=\"allUsers.length > 0\">\n                            <b-list-group-item class=\"flex-row align-items-start\" @click=\"emitContact(contactItem)\" v-for=\"contactItem in allUsers\" :key=\"contactItem.username\">\n                                <div class=\"d-flex flex-row align-content-center justify-content-around\">\n                                    <div class=\"align-self-lg-start\"><b-avatar></b-avatar></div>\n                                    <div><h4>{{ contactItem.username }}</h4></div>\n                                </div>\n                            </b-list-group-item>\n                        </b-list-group>\n                    </b-collapse>\n                </b-col>\n            </b-row>\n        </b-container>\n        <template v-slot:footer=\"{ hide }\">\n            <div class=\"d-flex bg-dark text-light justify-content-around align-items-center px-3 py-2\">\n                <b-button variant=\"outline-warning\" @click=\"signOut\">Выйти</b-button>\n                <b-button size=\"md\" @click=\"hide\">Закрыть</b-button>\n            </div>\n        </template>\n        <EditChatModal\n            :all-users=\"allUsers\"\n            :is-modal-opened=\"isEditModalOpened\"\n            :opened-chat=\"openedChat\"\n            @close=\"isEditModalOpened = false\"\n            @contact=\"emitContact($event.data)\"></EditChatModal>\n    </b-sidebar>\n</template>\n\n<script>\n    import api from \"../../api/api\";\n    import CreateChatModal from \"./modals/CreateChatModal\";\n    import EditChatModal from \"./modals/EditChatModal\";\n    import ChatItem from \"./items/ChatItem\";\n\n    export default {\n        name: \"MobileSidebar\",\n        components: {ChatItem, EditChatModal, CreateChatModal},\n        data() {\n            return {\n                findUserText: '',\n                openedChat: null,\n                isEditModalOpened: false,\n                isCreateModalOpened: false,\n                editedChatName: '',\n            }\n        },\n        methods: {\n            emitContact(user) {\n                this.$emit('contact', {data: user});\n            },\n            signOut() {\n                api.get(\"signout\");\n                this.$router.push(\"/login\");\n            },\n            openChatSettingsModal(chat) {\n                this.openedChat = chat;\n                this.isEditModalOpened = true;\n                console.log(\"opened chat: \", chat)\n            },\n\n        },\n        computed: {\n            userData() {\n                return this.$store.getters.GET_USER;\n            },\n            allUsers() {\n                let all = this.$store.getters.GET_ALL_USERS;\n                if (all === undefined || all === null) {\n                    return [];\n                }\n                return this.$store.getters.GET_ALL_USERS.filter(item => item.username !== this.userData.username);\n            },\n            isOpened: {\n                get() {\n                    return this.$store.getters.IS_SIDEBAR_SHOWN;\n                },\n                set() {\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n.chat-name {\n    padding: 0 0 2px 0;\n    color: black;\n    font-size: larger;\n}\n.chat-last-message {\n    color: gray;\n    font-size: medium;\n}\n    .chat-options-icon {\n        position: absolute;\n        top: 6px;\n        right: 6px;\n    }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MobileSidebar.vue?vue&type=template&id=611feaf0&scoped=true&\"\nimport script from \"./MobileSidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./MobileSidebar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MobileSidebar.vue?vue&type=style&index=0&id=611feaf0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"611feaf0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <b-container>\n        <MobileSidebar\n                       v-on:contact=\"setNewChat($event.data)\"\n        ></MobileSidebar>\n        <b-button squared class=\"position-fixed fixed-top\" variant=\"primary\" v-b-toggle.sidebar-1>Меню</b-button>\n        <b-row>\n            <b-col>\n                <h4>Чат {{ chatName }}</h4>\n            </b-col>\n        </b-row>\n        <b-row>\n            <b-col>\n                <div id=\"messages-cont\" class=\"messages-container overflow-auto\" v-if=\"chosenChatMessages !== null\">\n                    <div v-for=\"message in chosenChatMessages.concat([]).reverse()\" :key=\"message.date\" :class=\"(message.sender === user.username ? 'right-message' : 'left-message') + ' message-container'\">\n                        <div class=\"message-header\">\n                            <div class=\"message-sender\">\n                                {{ message.sender }}\n                            </div>\n                            <div class=\"message-date\"> {{ convertToDatetime(message.date) }} </div>\n                        </div>\n                        <div :class=\"message.state === 1 ? 'message-sent' : (message.state === 2 ? 'message-delivered' : 'message-read') + ' message-text'\">{{ message.text }}</div>\n                    </div>\n                </div>\n            </b-col>\n        </b-row>\n        <b-row align-content=\"center\">\n            <b-col align-self=\"center\">\n                <div class=\"input-container w-75 m-auto\">\n                    <b-input-group>\n                        <b-input class=\"message-input\" placeholder=\"Введите сообщение...\" type=\"text\" v-model=\"messageText\"></b-input>\n                        <b-input-group-append>\n                            <b-button variant=\"outline-primary\" @click=\"sendMessage\"><b-icon-envelope></b-icon-envelope></b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\n    import MobileSidebar from \"../components/ModileSideBar/MobileSidebar\";\n\n    export default {\n        name: \"Chat\",\n        components: {MobileSidebar},\n        data() {\n            return {\n                messageText: '',\n                findUserText: ''\n            }\n        },\n        created() {\n            this.$store.dispatch(\"LOAD_USER_DATA\");\n            this.$store.dispatch(\"LOAD_ALL_USERS\");\n            this.connection = this.setConnection();\n        },\n        mounted() {\n            this.$store.dispatch(\"SET_SIDEBAR_OPENED_STATE\", true);\n        },\n        beforeDestroy() {\n            this.$disconnect();\n        },\n        methods: {\n            sendMessage() {\n                this.$store.dispatch(\"SEND_MESSAGE\", this.messageText);\n                this.messageText = \"\";\n            },\n            setConnection() {\n                this.$connect();\n                // подписываюсь здесь, но вся логика получения сообщения в store\n                this.$options.sockets.onmessage = (data) => {\n                    let message = JSON.parse(data.data);\n                    this.$store.dispatch(\"RECEIVE_MESSAGE\", message);\n                    let messageCont = document.getElementById(\"messages-cont\");\n                    messageCont.scrollTop = messageCont.scrollHeight;\n                };\n            },\n            setNewChat(recipient) {\n                this.$store.dispatch(\"CHANGE_CURRENT_CHAT\", null);\n                this.$store.dispatch(\"CHANGE_NEW_CONTACT_NAME\", recipient.username);\n                this.$store.dispatch(\"SET_SIDEBAR_OPENED_STATE\", false);\n            },\n            convertToDatetime(timestamp) {\n                const date = new Date(timestamp);\n                const hours = date.getHours();\n                const minutes = \"0\" + date.getMinutes();\n                const seconds = \"0\" + date.getSeconds();\n\n                return hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\n            },\n        },\n        computed: {\n            user() {\n                return this.$store.getters.GET_USER;\n            },\n            allUsers() {\n                return this.$store.getters.GET_ALL_USERS;\n            },\n            newUsers() {\n                if (this.$store.getters.GET_ALL_USERS.length < 1) {\n                    return [];\n                }\n                return this.$store.getters.GET_ALL_USERS.filter(item => {\n                    return item.username !== this.user.username &&\n                        (this.user.contacts == null ? true : !this.user.contacts.includes(item.username))\n                });\n            },\n            chosenChatMessages: {\n                get() {\n                    let messageCont = document.getElementById(\"messages-cont\");\n                    if (messageCont !== null)\n                        messageCont.scrollTop = messageCont.scrollHeight;\n                    return this.$store.getters.GET_MESSAGES;\n                },\n                set() {\n\n                }\n            },\n            chatName() {\n                return this.$store.getters.GET_CHAT_NAME;\n            }\n        },\n    }\n</script>\n\n<style scoped>\n    p {\n        padding: 0;\n        margin: 0;\n    }\n\n    .messages-container {\n        display: flex;\n        flex-direction: column-reverse;\n        height: 30rem;\n    }\n\n    .custom-overflow {\n        overflow-x: auto;\n    }\n\n\n    .chatroom-container {\n        margin: 0 auto;\n    }\n    .contacts-container {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        justify-content: start;\n        align-items: flex-start;\n        align-content: flex-start;\n        background-color: #ffd46f;\n        padding: 2em;\n    }\n    .chat-screen {\n        position: relative;\n        min-width: 30em;\n        display: flex;\n        margin: 0 auto;\n        flex-direction: column;\n        justify-content: start;\n        background-color: whitesmoke;\n        box-shadow: 0.5em 0.5em 4em rgba(0, 0, 0, .5);\n        padding: 1em 0.7em 4em;\n    }\n    .chat-item {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        height: fit-content;\n    }\n\n    .input-container {\n        position: fixed;\n        bottom: 1em;\n        height: fit-content;\n        display: flex;\n        flex-direction: row;\n        justify-content: space-around;\n        padding: 0.5em;\n    }\n\n    .message-input {\n        max-width: 100%;\n        width: 75%;\n    }\n\n    .sidebar-content {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n    }\n\n    .active-chat-container {\n        display: block;\n    }\n\n    .contact-container {\n        border: green solid 1px;\n        border-radius: 7px;\n    }\n\n    .message-container {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        padding: 0.5em;\n        margin: 0 0 5px 0;\n        max-width: 55%;\n        width: fit-content;\n    }\n\n    .message-header {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        width: fit-content;\n        align-content: flex-end;\n        align-items: flex-end;\n    }\n    .message-sender {\n        padding-right: 1vw;\n    }\n\n    .right-message {\n        align-self: flex-end;\n    }\n\n    .left-message {\n        align-self: flex-start;\n    }\n\n    .right-message p {\n        text-align: right;\n    }\n\n    .right-message .message-text {\n        margin-left: auto;\n    }\n\n\n    .left-message p {\n        text-align: left;\n    }\n\n    .left-message .message-text {\n        margin-right: auto;\n    }\n\n    .message-text {\n        padding: 5px;\n        width: 100%;\n    }\n    .message-sent {\n        background-color: #c9c9c9;\n    }\n    .message-delivered {\n        background-color: #a5d4ff;\n    }\n    .message-read {\n        background-color: #9dffbe;\n    }\n\n\n    @media only screen\n    and (max-width : 375px)\n    and (max-height : 667px)\n    and (-webkit-device-pixel-ratio : 2),\n    only screen\n    and (max-width : 375px)\n    and (max-height : 812px),\n    only screen\n    and (max-width : 414px)\n    and (max-height : 736px)\n    and (-webkit-device-pixel-ratio : 3),\n    only screen\n    and (max-width : 411px)\n    and (max-height : 731px),\n    only screen\n    and (max-width : 411px)\n    and (max-height : 823px) {\n        .chat-screen {\n            position: relative;\n            width: 100%;\n            display: flex;\n            margin: 0 auto;\n            flex-direction: column;\n            justify-content: start;\n            background-color: whitesmoke;\n            box-shadow: 0.5em 0.5em 4em rgba(0, 0, 0, .5);\n            padding: 1em 0.7em 4em;\n        }\n    }\n\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=e466c89a&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=e466c89a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e466c89a\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Login from \"../pages/Login\";\nimport Chat from \"../pages/Chat\";\n\nVue.use(VueRouter);\n\nconst routes = [\n    {\n        path: '/',\n        redirect: '/login',\n    },\n    {\n        path: '/login',\n        name: 'login_page',\n        meta: {\n            title: 'login page',\n        },\n        component: Login,\n    },\n    {\n        path: '/chat',\n        name: 'chat_page',\n        meta: {\n            title: 'Chat page',\n        },\n        component: Chat,\n    },\n];\n\nconst router = new VueRouter({\n    mode: 'history',\n    base: '/',\n    routes,\n});\n\nexport default router;\n","import Vue from 'vue';\nimport store from './store';\nimport App from './App.vue';\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\nimport router from \"./router/router\";\nimport { BootstrapVue, IconsPlugin } from 'bootstrap-vue'\nimport VueNativeSock from 'vue-native-websocket'\nVue.use(VueNativeSock, \"ws://\" + window.location.host + \"/ws/connect\", {\n  connectManually: true,\n  reconnection: true,\n  reconnectionAttempts: 5,\n}, {store: store, protocol: 'chat'},);\n\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\n\nVue.config.productionTip = false;\n\nnew Vue({\n  store,\n  router,\n  render: h => h(App),\n}).$mount('#app')\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateChatModal.vue?vue&type=style&index=0&id=1651a5b7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateChatModal.vue?vue&type=style&index=0&id=1651a5b7&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=e466c89a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=e466c89a&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSidebar.vue?vue&type=style&index=0&id=611feaf0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSidebar.vue?vue&type=style&index=0&id=611feaf0&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=style&index=0&id=786a9129&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=style&index=0&id=786a9129&scoped=true&lang=css&\""],"sourceRoot":""}